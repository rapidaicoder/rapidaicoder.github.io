<header class="site-header">
  <div class="container header-container">
    <a class="site-logo" href="{{ site.baseurl }}/{% if lang != 'en' %}{{ lang }}/{% endif %}">
      AICoder
    </a>

    <nav class="site-nav">
      <ul class="nav-list">
        {% for item in site.data.navigation[lang].main %}
          <li class="nav-item">
            <a href="{{ item.url | relative_url }}" class="nav-link {% if item.external %}external{% endif %}">
              {{ item.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </nav>

    <div class="lang-switcher">
      {% for l in site.locales %}
        {% if l == lang %}
          <span class="lang-link active">{{ l | upcase }}</span>
        {% else %}
          {% if l == 'en' %}
            {% assign target_url = page.url | replace_first: '/zh-cn/', '/' %}
          {% else %}
            {% assign target_url = '/zh-cn' | append: page.url %}
          {% endif %}
          <a href="{{ target_url | relative_url }}" class="lang-link">
            {{ l | upcase }}
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</header>